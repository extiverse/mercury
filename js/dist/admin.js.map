{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@extiverse/mercury/webpack/bootstrap","webpack://@extiverse/mercury/webpack/runtime/compat get default export","webpack://@extiverse/mercury/webpack/runtime/define property getters","webpack://@extiverse/mercury/webpack/runtime/hasOwnProperty shorthand","webpack://@extiverse/mercury/webpack/runtime/make namespace object","webpack://@extiverse/mercury/external root \"flarum.core.compat['admin/app']\"","webpack://@extiverse/mercury/external root \"flarum.core.compat['extend']\"","webpack://@extiverse/mercury/external root \"flarum.core.compat['admin/components/HeaderSecondary']\"","webpack://@extiverse/mercury/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@extiverse/mercury/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@extiverse/mercury/external root \"flarum.core.compat['components/ExtensionPage']\"","webpack://@extiverse/mercury/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@extiverse/mercury/external root \"flarum.core.compat['helpers/icon']\"","webpack://@extiverse/mercury/external root \"flarum.core.compat['utils/classList']\"","webpack://@extiverse/mercury/./src/admin/Pages/ExtensionsUpdatesPage.js","webpack://@extiverse/mercury/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@extiverse/mercury/external root \"flarum.core.compat['common/components/Link']\"","webpack://@extiverse/mercury/./src/admin/index.tsx","webpack://@extiverse/mercury/./src/admin/extend/HeaderSecondary.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/classList'];","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/components/ExtensionPage';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport icon from 'flarum/helpers/icon';\nimport classList from 'flarum/utils/classList';\n\nexport default class ExtensionsUpdatesPage extends ExtensionPage {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.token = app.data.settings['extiverse-mercury.token'] || null;\n        this.loading = true;\n        this.updates = [];\n\n        if (this.token) {\n            app.request({\n                method: 'GET',\n                url: app.forum.attribute('apiUrl') + '/extiverse/mercury/extension-updates'\n            }).then((response) => {\n                this.updates = response;\n\n                this.loading = false;\n\n                m.redraw();\n            });\n        } else {\n            this.loading = false;\n        }\n    }\n\n    className() {\n        return 'Extiverse Mercury ExtensionUpdates--Page';\n    }\n\n    content() {\n        if (this.loading) {\n            return <LoadingIndicator/>;\n        }\n\n        return super.content();\n    }\n\n    sections() {\n        let sections = super.sections();\n\n        sections.remove('permissions');\n\n        sections.add('extension-updates', this.extensionUpdates());\n\n        return sections;\n    }\n\n    extensionUpdates() {\n        if (this.loading) return (<div />);\n\n        return (\n            <div className=\"container UserListPage\">\n                <div className=\"UserListPage-grid UserListPage-grid--loaded\" style=\"--columns: 4\">\n                    <div aria-rowindex={1} aria-colindex={1} className=\"UserListPage-grid-header\">{app.translator.trans('extiverse-mercury.admin.extension-updates-page.extension-name')}</div>\n                    <div aria-rowindex={1} aria-colindex={2} className=\"UserListPage-grid-header\">{app.translator.trans('extiverse-mercury.admin.extension-updates-page.installed-version')}</div>\n                    <div aria-rowindex={1} aria-colindex={3} className=\"UserListPage-grid-header\">{app.translator.trans('extiverse-mercury.admin.extension-updates-page.highest-version')}</div>\n                    <div aria-rowindex={1} aria-colindex={4} className=\"UserListPage-grid-header\">{app.translator.trans('extiverse-mercury.admin.extension-updates-page.extension-is-up-to-date')}</div>\n                    {this.updates.map((update, i) => {\n                        return this.extensionUpdateItem(update, i);\n                    })}\n                </div>\n            </div>\n        );\n    }\n    extensionUpdateItem(update, i) {\n        const updateClass = update['needs-update'] ? 'update-available' : 'update-ok';\n        const classes = classList(['UserListPage-grid-rowItem', i % 2 > 0 && 'UserListPage-grid-rowItem--shaded', updateClass]);\n\n        return [\n            <div className={classes} aria-rowindex={i + 2} aria-colindex={1}>{update['title']} <code>({update['name']})</code></div>,\n            <div className={classes} aria-rowindex={i + 2} aria-colindex={2}>{update['current-version']}</div>,\n            <div className={classes} aria-rowindex={i + 2} aria-colindex={3}>{update['highest-version']}</div>,\n            <div className={'centered ' + classes} aria-rowindex={i + 2} aria-colindex={4}>{update['needs-update'] ? icon('fas fa-exclamation-triangle') : icon('fas fa-check')}</div>\n        ];\n    }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","import app from 'flarum/admin/app';\n\nimport HeaderSecondary from './extend/HeaderSecondary';\nimport ExtensionsUpdatesPage from \"./Pages/ExtensionsUpdatesPage\";\nimport Link from 'flarum/common/components/Link';\n\napp.initializers.add('extiverse-mercury', () => {\n    const link = \"https://extiverse.com/auth/mercury?community=\" + window.location.host;\n\n    app.extensionData\n        .for('extiverse-mercury')\n        .registerSetting({\n            setting: 'extiverse-mercury.token',\n            type: 'text',\n            label: app.translator.trans('extiverse-mercury.admin.settings.token',{a: <Link href={link} target=\"_blank\" external={true} />}),\n            help: app.translator.trans('extiverse-mercury.admin.settings.token-description',{a: <Link href={link} target=\"_blank\" external={true} />})\n        })\n        .registerPage(ExtensionsUpdatesPage);\n\n    HeaderSecondary();\n});\n","import app from 'flarum/admin/app';\nimport { extend } from 'flarum/extend';\nimport HeaderSecondary from 'flarum/admin/components/HeaderSecondary';\nimport LinkButton from \"flarum/common/components/LinkButton\";\n\nexport default function () {\n    extend(HeaderSecondary.prototype, 'items', (items) => {\n        const token = app.data.settings['extiverse-mercury.token'] || null;\n        const updates = Number(app.data.settings['extiverse-mercury.updates-required']);\n        let label, icon, warning;\n\n        if (! token) {\n            label = app.translator.trans('extiverse-mercury.admin.header-secondary.no-token');\n            icon = 'fas fa-exclamation-triangle';\n            warning = true;\n        } else {\n            label = app.translator.trans('extiverse-mercury.admin.header-secondary.updates', {count: updates});\n            warning = updates > 0;\n            icon = warning ? 'fas fa-exclamation-triangle' : 'fas fa-thumbs-up';\n        }\n\n        items.add('extiverse-mercury',\n            <LinkButton className={'ExtiverseMercuryButton Button ' + (warning && 'Button--danger')} href={app.route('extension', { id: 'extiverse-mercury' })} icon={icon}>\n                {label}\n            </LinkButton>,\n            10\n        );\n    });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","ExtensionsUpdatesPage","subClass","superClass","create","constructor","oninit","vnode","this","token","app","loading","updates","method","url","then","response","m","redraw","className","content","sections","remove","add","extensionUpdates","style","map","update","i","extensionUpdateItem","updateClass","classes","classList","icon","ExtensionPage","link","window","location","host","registerSetting","setting","type","label","href","target","external","help","registerPage","extend","HeaderSecondary","items","warning","Number","count","id"],"sourceRoot":""}